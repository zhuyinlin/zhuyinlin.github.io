

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>tensorflow 学习笔记 &mdash; EmilyNotes 1.0 文档</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="caffe 学习笔记" href="caffe.html" />
    <link rel="prev" title="常用第三方包" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> EmilyNotes
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../os/index.html">OS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../programing/index.html">编程相关</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">常用第三方包</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">tensorflow 学习笔记</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">介绍</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install">Install</a></li>
<li class="toctree-l3"><a class="reference internal" href="#android">从构建模型到Android端</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id3">训练阶段</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id9">调试阶段</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id10">测试阶段</a></li>
<li class="toctree-l4"><a class="reference internal" href="#c">C++ 开发</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id13">Android实现</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#caffetensorflow">Caffe到tensorflow的转换</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nodejs">Nodejs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id18">源代码精读</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id19">基础应用注意</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id20">笔记</a></li>
<li class="toctree-l4"><a class="reference internal" href="#seq2seq">Seq2Seq</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#skflow-scikit-flow">skflow(Scikit Flow)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id21">代码结构</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id22">训练记录</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id23">1 数据准备</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id24">2 参数分析</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id25">后续工作</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="caffe.html">caffe 学习笔记</a></li>
<li class="toctree-l2"><a class="reference internal" href="OpenCV.html">OpenCV</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../platform/index.html">平台搭建</a></li>
<li class="toctree-l1"><a class="reference internal" href="../math/index.html">math</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithm/index.html">算法</a></li>
<li class="toctree-l1"><a class="reference internal" href="../research/index.html">文献资料</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">EmilyNotes</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">常用第三方包</a> &raquo;</li>
        
      <li>tensorflow 学习笔记</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/zhuyinlin/zhuyinlin.github.io/blob/master/source/packages/tensorflow.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tensorflow">
<h1>tensorflow 学习笔记<a class="headerlink" href="#tensorflow" title="永久链接至标题">¶</a></h1>
<div class="contents local topic" id="id1">
<ul class="simple">
<li><p><a class="reference internal" href="#id2" id="id26">介绍</a></p></li>
<li><p><a class="reference internal" href="#install" id="id27">Install</a></p></li>
<li><p><a class="reference internal" href="#android" id="id28">从构建模型到Android端</a></p>
<ul>
<li><p><a class="reference internal" href="#id3" id="id29">训练阶段</a></p>
<ul>
<li><p><a class="reference internal" href="#id4" id="id30">1  构建模型时注意事项</a></p>
<ul>
<li><p><a class="reference internal" href="#add-new-op-to-tf-platform" id="id31">1.1 add new op to TF-platform</a></p></li>
<li><p><a class="reference internal" href="#data-input-pipline" id="id32">1.2 data input pipline</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id5" id="id33">2  模型&amp;数据的保存和导入</a></p>
<ul>
<li><p><a class="reference internal" href="#saver-re-cifar10" id="id34">2.1 Saver(<em>re:cifar10</em>)</a></p></li>
<li><p><a class="reference internal" href="#supervisor-ref1" id="id35">2.2 Supervisor ref1</a></p></li>
<li><p><a class="reference internal" href="#id6" id="id36">2.3 同时保存模型和数据</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#tensorboard" id="id37">3  可视化(tensorboard)</a></p></li>
<li><p><a class="reference internal" href="#id7" id="id38">4  对已训练好模型的操作</a></p>
<ul>
<li><p><a class="reference internal" href="#changing-inputs-in-existing-networks-ref2" id="id39">4.1 Changing Inputs in existing networks ref2</a></p></li>
<li><p><a class="reference internal" href="#ref3" id="id40">4.2 将已有网络作为现有网络的一部分重新训练网络 ref3</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#set-layer-wise-learning-rate" id="id41">5 set layer-wise learning rate</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id9" id="id42">调试阶段</a></p></li>
<li><p><a class="reference internal" href="#id10" id="id43">测试阶段</a></p>
<ul>
<li><p><a class="reference internal" href="#pb-re-classify-image" id="id44">1  .pb文件的导入(<em>re:classify_image</em>)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#c" id="id45">C++ 开发</a></p>
<ul>
<li><p><a class="reference internal" href="#graph" id="id46">1  创建graph并使用</a></p></li>
<li><p><a class="reference internal" href="#pb-re-label-image" id="id47">2  .pb文件的使用(<em>re:label_image</em>)</a></p></li>
<li><p><a class="reference internal" href="#id11" id="id48">3  生成 tensorflow 的动态链接库</a></p></li>
<li><p><a class="reference internal" href="#id12" id="id49">4 c++ 代码调试</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id13" id="id50">Android实现</a></p>
<ul>
<li><p><a class="reference internal" href="#id14" id="id51">android环境搭建</a></p></li>
<li><p><a class="reference internal" href="#id15" id="id52">开发</a></p></li>
<li><p><a class="reference internal" href="#id16" id="id53">注意事项</a></p></li>
<li><p><a class="reference internal" href="#id17" id="id54">错误集锦</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#caffetensorflow" id="id55">Caffe到tensorflow的转换</a></p></li>
<li><p><a class="reference internal" href="#nodejs" id="id56">Nodejs</a></p></li>
<li><p><a class="reference internal" href="#id18" id="id57">源代码精读</a></p>
<ul>
<li><p><a class="reference internal" href="#id19" id="id58">基础应用注意</a></p></li>
<li><p><a class="reference internal" href="#id20" id="id59">笔记</a></p></li>
<li><p><a class="reference internal" href="#seq2seq" id="id60">Seq2Seq</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#skflow-scikit-flow" id="id61">skflow(Scikit Flow)</a></p></li>
<li><p><a class="reference internal" href="#id21" id="id62">代码结构</a></p></li>
<li><p><a class="reference internal" href="#id22" id="id63">训练记录</a></p>
<ul>
<li><p><a class="reference internal" href="#id23" id="id64">1 数据准备</a></p></li>
<li><p><a class="reference internal" href="#id24" id="id65">2 参数分析</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id25" id="id66">后续工作</a></p></li>
</ul>
</div>
<div class="section" id="id2">
<h2><a class="toc-backref" href="#id1">介绍</a><a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<blockquote>
<div><p>tensorflow 可用于c、c++和python</p>
<p>最好是从源码安装（在开发android app时要求）</p>
<dl>
<dt>生成动态链接库(生成的文件在 bazel-bin/tensoflow 下)</dt><dd><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ubuntu(.so)</span>
bazel build //tensoflow:libtensorflow.so

<span class="c1"># mac(.dylib)</span>
bazel build //tensorflow
</pre></div>
</div>
</dd>
</dl>
<dl class="simple">
<dt>工作流程包括以下几大块：</dt><dd><ul class="simple">
<li><p>construction phase ——&gt; assembles a graph</p></li>
<li><p>execution phase    ——&gt; session</p></li>
<li><p>save &amp; load        ——&gt; saver, superviser (GraphDef)</p></li>
<li><p>visuable the graph ——&gt; summary, tensorboard</p></li>
</ul>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="install">
<h2><a class="toc-backref" href="#id1">Install</a><a class="headerlink" href="#install" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li><p>ubuntu <a class="reference internal" href="../os/ubuntu.html#tf-install-ubuntu"><span class="std std-ref">Tensorflow</span></a></p></li>
</ul>
</div>
<div class="section" id="android">
<h2><a class="toc-backref" href="#id1">从构建模型到Android端</a><a class="headerlink" href="#android" title="永久链接至标题">¶</a></h2>
<div class="section" id="id3">
<h3><a class="toc-backref" href="#id1">训练阶段</a><a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h3>
<div class="section" id="id4">
<h4><a class="toc-backref" href="#id1">1  构建模型时注意事项</a><a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h4>
<blockquote>
<div><dl>
<dt>tf.app.flag</dt><dd><p>不建议使用，未来可能修改，建议使用python的 <a class="reference external" href="https://docs.python.org/2.7/library/argparse.html">argparse module</a> 实现自己的flag parsing</p>
</dd>
<dt>build a graph that works with variable batch sizes</dt><dd><p>使用 placeholder 时将 shape 的第一位设为 None，此时注意构建 model 时的 reshape 问题，将相应位置设为 －1</p>
<p>其他参考 <a class="reference external" href="https://www.tensorflow.org/versions/r0.10/resources/faq.html">build a graph that works with variable batch sizes</a></p>
</dd>
<dt>网络复用</dt><dd><div class="line-block">
<div class="line"><a class="reference external" href="https://www.tensorflow.org/versions/r0.11/how_tos/variable_scope/index.html">tutorial</a></div>
<div class="line">定义时使用 tf.get_variable() 以检测 variable 是否重复；</div>
<div class="line">在定义网络时，在 scope 命名的名称下定义每个子网络，可实现复用；</div>
<div class="line">在 validate 时，设置reuse，那么可定义一个测试网络，其参数与 inference 一致；</div>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>reuse 默认为 False，只能由 False 设置为 True， 其后保持该状态，无法从 True 设置为 False</p>
</div>
</dd>
</dl>
</div></blockquote>
<div class="section" id="add-new-op-to-tf-platform">
<h5><a class="toc-backref" href="#id1">1.1 add new op to TF-platform</a><a class="headerlink" href="#add-new-op-to-tf-platform" title="永久链接至标题">¶</a></h5>
<blockquote>
<div><ol class="arabic">
<li><p>tensoflow/core/ops 中注册 op （ _ops.cc 中 <code class="docutils literal notranslate"><span class="pre">REGISTER_OP</span></code> for op and grad）</p></li>
<li><p>tensoflow/core/kernels 下实现 op （ _op.cc, _op_gpu.cu.cc, _op_gpu.h）</p></li>
<li><p>tensoflow/core/ops/ops.pbtxt  中添加 op 的定义</p></li>
<li><p>tensoflow/core/BUILD 的 <code class="docutils literal notranslate"><span class="pre">ops</span></code> 、 <code class="docutils literal notranslate"><span class="pre">all_kernels</span></code> 中声明前述定义</p></li>
<li><p>tensorflow/core/kernels/BUILD 相应 <code class="docutils literal notranslate"><span class="pre">cc_library</span></code>,  <code class="docutils literal notranslate"><span class="pre">tf_kernel_library</span> <span class="pre">``,</span> <span class="pre">``filegroup</span></code></p></li>
<li><p>tensoflow/python/ops 中声明 (.py &#64;&#64;, _grad.py &#64;ops.RegisterGradient(“XXX”))</p></li>
<li><p>tensorflow/contrib/makefile/tf_op_files.txt 加入op kernels 所在路径</p></li>
<li><p>重新编译</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bazel clean
./configure
bazel build ...
</pre></div>
</div>
</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="data-input-pipline">
<h5><a class="toc-backref" href="#id1">1.2 data input pipline</a><a class="headerlink" href="#data-input-pipline" title="永久链接至标题">¶</a></h5>
<blockquote>
<div><ol class="arabic simple">
<li><p>生成 tfrecord 时的压缩问题，图片做tf.image.encode_XXX,</p></li>
<li><p>读取 tfrecord 时注意keys_to_feature 每条的格式，图片读出规格，</p></li>
<li><p>读成 batch 注意前面各步骤是否导致图片大小不可知</p></li>
</ol>
</div></blockquote>
</div>
</div>
<div class="section" id="id5">
<h4><a class="toc-backref" href="#id1">2  模型&amp;数据的保存和导入</a><a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h4>
<div class="section" id="saver-re-cifar10">
<h5><a class="toc-backref" href="#id1">2.1 Saver(<em>re:cifar10</em>)</a><a class="headerlink" href="#saver-re-cifar10" title="永久链接至标题">¶</a></h5>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">saver</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">train</span><span class="o">.</span><span class="n">Saver</span><span class="p">()</span>
<span class="n">saver</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">sess</span><span class="p">,</span><span class="n">FLAG</span><span class="o">.</span><span class="n">checkpoint_dir</span> <span class="o">+</span> <span class="s1">&#39;xxx.ckpt&#39;</span><span class="p">,</span> <span class="n">global_step</span> <span class="o">=</span> <span class="c1">#)</span>
<span class="c1"># saver.save(..., write_meta_graph=False) 可在保存 .ckpt 文件时不保存 .meta文件</span>
<span class="n">saver</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>

<span class="c1"># restore the weights</span>
<span class="n">ckpt</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">train</span><span class="o">.</span><span class="n">get_checkpoint_state</span><span class="p">(</span><span class="n">FLAG</span><span class="o">.</span><span class="n">checkpoint_dir</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ckpt</span> <span class="ow">and</span> <span class="n">ckpt</span><span class="o">.</span><span class="n">model_checkpoint_path</span><span class="p">:</span>
  <span class="n">saver</span><span class="o">.</span><span class="n">restore</span><span class="p">(</span><span class="n">sess</span><span class="p">,</span> <span class="n">ckpt</span><span class="o">.</span><span class="n">model_checkpoint_path</span><span class="p">)</span>
</pre></div>
</div>
<p>Saver 将 model 中的 Variable 保存为 checkpoints(.ckpt)</p>
<p>如果只想保存／导入部分参数，在定义 saver 时指定 var_list 参数，详情参考 API 文档</p>
<p>By default, a tf.train.Saver will create ops that (i) save every variable in your graph when you call saver.save() and (ii) lookup (by name) every variable in the given checkpoint when you call saver.restore(). While this works for most common scenarios, you have to provide more information to work with specific subsets of the variables:</p>
<ol class="arabic simple">
<li><p>If you only want to restore a subset of the variables, you can get a list of these variables by calling <code class="docutils literal notranslate"><span class="pre">tf.get_collection(tf.GraphKeys.GLOBAL_VARIABLES,</span> <span class="pre">scope=G_NETWORK_PREFIX)</span></code> , assuming that you put the “g” network in a common with <code class="docutils literal notranslate"><span class="pre">tf.name_scope(G_NETWORK_PREFIX):</span></code> or <code class="docutils literal notranslate"><span class="pre">tf.variable_scope(G_NETWORK_PREFIX):</span></code> block. You can then pass this list to the <code class="docutils literal notranslate"><span class="pre">tf.train.Saver</span></code> constructor.</p></li>
<li><p>If you want to restore a subset of the variable and/or they variables in the checkpoint have <strong>different names</strong> , you can pass a dictionary as the <code class="docutils literal notranslate"><span class="pre">var_list</span></code> argument. By default, each variable in a checkpoint is associated with a key, which is the value of its <code class="docutils literal notranslate"><span class="pre">tf.Variable.name</span></code> property. If the name is different in the target graph (e.g. because you added a scope prefix), you can specify a dictionary that maps string keys (in the checkpoint file) to <code class="docutils literal notranslate"><span class="pre">tf.Variable</span></code> objects (in the target graph).</p></li>
</ol>
<p>save model:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">w1</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">Variable</span><span class="p">(</span><span class="n">tf</span><span class="o">.</span><span class="n">truncated_normal</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">]),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;w1&#39;</span><span class="p">)</span>
<span class="n">w2</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">Variable</span><span class="p">(</span><span class="n">tf</span><span class="o">.</span><span class="n">truncated_normal</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">[</span><span class="mi">20</span><span class="p">]),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;w2&#39;</span><span class="p">)</span>
<span class="n">tf</span><span class="o">.</span><span class="n">add_to_collection</span><span class="p">(</span><span class="s1">&#39;vars&#39;</span><span class="p">,</span> <span class="n">w1</span><span class="p">)</span>
<span class="n">tf</span><span class="o">.</span><span class="n">add_to_collection</span><span class="p">(</span><span class="s1">&#39;vars&#39;</span><span class="p">,</span> <span class="n">w2</span><span class="p">)</span>
<span class="n">saver</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">train</span><span class="o">.</span><span class="n">Saver</span><span class="p">()</span>
<span class="n">sess</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">sess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">tf</span><span class="o">.</span><span class="n">global_variables_initializer</span><span class="p">())</span>
<span class="n">saver</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">sess</span><span class="p">,</span> <span class="s1">&#39;my-model&#39;</span><span class="p">)</span>
<span class="c1"># `save` method will call `export_meta_graph` implicitly.</span>
<span class="c1"># you will get saved graph files:my-model.meta</span>
</pre></div>
</div>
<p>restore model:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sess</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">new_saver</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">train</span><span class="o">.</span><span class="n">import_meta_graph</span><span class="p">(</span><span class="s1">&#39;my-model.meta&#39;</span><span class="p">)</span>
<span class="n">new_saver</span><span class="o">.</span><span class="n">restore</span><span class="p">(</span><span class="n">sess</span><span class="p">,</span> <span class="n">tf</span><span class="o">.</span><span class="n">train</span><span class="o">.</span><span class="n">latest_checkpoint</span><span class="p">(</span><span class="s1">&#39;./&#39;</span><span class="p">))</span>
<span class="n">all_vars</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">get_collection</span><span class="p">(</span><span class="s1">&#39;vars&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">all_vars</span><span class="p">:</span>
    <span class="n">v_</span> <span class="o">=</span> <span class="n">sess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">v_</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>训练时定义 saver 需在构建好网络后， 设置训练参数（如 lr， momentum 等）前， 否则模型无关的参数会加入到 saver 的 参数列表中，当从已训练好的模型中导入参数时会报错！或者定义 saver 时， 指定参数列表。</p>
<p>如果保存的模型文件随着step 增大， 可能是在训练loop 中有 add op 的操作，导致graph 随训练增大 —— Try printing out the node names in the graph each step to checkout. Or you can do “tf.get_default_graph().finalize()” after you’ve done modifying your graph, that’ll throw an error on any new modifications</p>
</div>
</div></blockquote>
</div>
<div class="section" id="supervisor-ref1">
<h5>2.2 Supervisor <a class="reference external" href="https://www.tensorflow.org/programmers_guide/meta_graph">ref1</a><a class="headerlink" href="#supervisor-ref1" title="永久链接至标题">¶</a></h5>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># restore the model</span>
<span class="n">tf</span><span class="o">.</span><span class="n">import_graph_def</span>
</pre></div>
</div>
<p>Supervisor 将 model definition 保存为 graph.pbtxt</p>
<dl class="simple">
<dt>Note:</dt><dd><ul class="simple">
<li><p>由于 Saver 使用 special collection holding list of Variables that’s attached to the model Graph, 而import_graph_def 时不会初始化这个 collection ，因此这二者不能一起使用；</p></li>
<li><p>目前可以使用 Pyan Sepassi 的方法——构造Graph时为每个 node 添加名字，然后使用 Saver 导入 weights；</p></li>
<li><p>如果要一起使用，在创建Variable的时候，对每个Variable对象使用 tf.add_to_collection(tf.GraphKeys.VARIABLES,variable);</p></li>
</ul>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="id6">
<h5><a class="toc-backref" href="#id1">2.3 同时保存模型和数据</a><a class="headerlink" href="#id6" title="永久链接至标题">¶</a></h5>
<blockquote>
<div><dl>
<dt>思路:</dt><dd><div class="line-block">
<div class="line">先使用 tf.import_graph_def 的 constants 替换 original（training）graph 中的 variables；</div>
<div class="line">然后使用 tf.Graph.as_graph_def write out the resulting GraphDef</div>
</div>
</dd>
<dt>具体步骤如下:</dt><dd><ol class="arabic simple">
<li><p>构建并训练自己的模型 tf.Graph （记为 g_1）；</p></li>
<li><p>提取variable最终的值并存储为 numpy array （使用session.run()）；</p></li>
<li><p>在新的 tf.Graph （记为g_2）中为每个 variable 创建 tf.constant（），并用步骤2 的值赋值；</p></li>
<li><p>使用 tf.import_graph_def 将 g_1 的节点拷贝到 g_2，利用参数 input_map ，将g_1 中的variable 替换为步骤3中创建的 tf.constant()；</p></li>
<li><p>使用 g_2.as_graph_def 保存 graph 的 protocol buffer representation。</p></li>
</ol>
</dd>
</dl>
</div></blockquote>
<hr class="docutils" />
<p><strong>方法1</strong></p>
<blockquote>
<div><p>采用“/tensorflow/python/tools/freeze_graph.py”脚本，参考 <a class="reference external" href="https://www.tensorflow.org/versions/r0.9/how_tos/tool_developers/index.html#graphdef">A tool…</a></p>
<dl class="simple">
<dt>步骤如下:</dt><dd><ol class="arabic simple">
<li><p>Save the checkpoints. (This is important as all your trained variables reside here)</p></li>
<li><p>Save the graph definition (raw definition, no variable).</p></li>
<li><p>Use the freeze_graph file to combine the graph structure(step2) with the valuse of each nodes values(step2) and generate a new graph model</p></li>
</ol>
</dd>
</dl>
</div></blockquote>
<p><strong>方法2</strong></p>
<blockquote>
<div><p>serialize your minimal graph both into textual(.pbtxt) and binary(.pb) protobuf by code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tensorflow.python.framework.graph_util</span> <span class="k">import</span> <span class="n">convert_variables_to_constants</span>

<span class="n">minimal_graph</span> <span class="o">=</span> <span class="n">convert_variables_to_constants</span><span class="p">(</span><span class="n">sess</span><span class="p">,</span><span class="n">sess</span><span class="o">.</span><span class="n">graph_def</span><span class="p">,[</span><span class="s2">&quot;output&quot;</span><span class="p">])</span>
<span class="c1">#&quot;output&quot; is the name of prediction node</span>

<span class="n">tf</span><span class="o">.</span><span class="n">train</span><span class="o">.</span><span class="n">write_graph</span><span class="p">(</span><span class="n">minimal_graph</span><span class="p">,</span><span class="s1">&#39;.&#39;</span><span class="p">,</span><span class="s1">&#39;xxx.proto&#39;</span><span class="p">,</span> <span class="n">as_text</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">tf</span><span class="o">.</span><span class="n">train</span><span class="o">.</span><span class="n">write_graph</span><span class="p">(</span><span class="n">minimal_graph</span><span class="p">,</span><span class="s1">&#39;.&#39;</span><span class="p">,</span><span class="s1">&#39;xxx.txt&#39;</span><span class="p">,</span> <span class="n">as_text</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># restore the model</span>
<span class="n">tf</span><span class="o">.</span><span class="n">import_graph_def</span>

<span class="c1"># serialize the graph</span>
<span class="n">tf</span><span class="o">.</span><span class="n">Graph</span><span class="o">.</span><span class="n">as_graph_def</span>
</pre></div>
</div>
<dl>
<dt><strong>convert_variables_to_constants</strong> 做了两件事:</dt><dd><div class="line-block">
<div class="line">it freeze the weights by replacing variables with constants</div>
<div class="line">it removes nodes which are not related to feedforward prediction</div>
</div>
</dd>
</dl>
<p>这个方法能够减小保存的 .pb 文件的大小，将不必要的内容删除；直接保存 .pb 会将 tensorflow 的所有方法加载</p>
</div></blockquote>
</div>
</div>
<div class="section" id="tensorboard">
<h4><a class="toc-backref" href="#id1">3  可视化(tensorboard)</a><a class="headerlink" href="#tensorboard" title="永久链接至标题">¶</a></h4>
<blockquote>
<div><p>保存信息：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#在下一语句前至少调用一次本类语句，否则报错</span>
<span class="n">tf</span><span class="o">.</span><span class="n">scalar_summary</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span><span class="n">variablename</span><span class="p">)</span>
<span class="n">tf</span><span class="o">.</span><span class="n">image_summary</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span><span class="n">imagename</span><span class="p">)</span>

<span class="n">summary_op</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">merge_all_summaries</span><span class="p">()</span>  <span class="c1"># 注意，本句不能放到训练循环内，否则会导致meta文件不断增大</span>
<span class="c1"># 或者：</span>
<span class="n">loss_summary</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">scalar_summary</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">summary_op</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">merge_summary</span><span class="p">([</span><span class="n">loss_sum</span><span class="p">])</span>

<span class="n">summary_writer</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">train</span><span class="o">.</span><span class="n">SummaryWriter</span><span class="p">(</span><span class="s1">&#39;/path/to/logs&#39;</span><span class="p">,</span><span class="n">sess</span><span class="o">.</span><span class="n">graph</span><span class="p">)</span>

<span class="n">summary_str</span> <span class="o">=</span> <span class="n">sess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">summary_op</span><span class="p">)</span> <span class="c1"># 根据情况,有些必须要feed_dict</span>
<span class="n">summary_writer</span><span class="o">.</span><span class="n">add_summary</span><span class="p">(</span><span class="n">summary_str</span><span class="p">,</span><span class="n">global_step</span><span class="o">=</span><span class="n">step</span><span class="p">)</span>
<span class="n">summary_writer</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  <span class="c1">#必须加，否则没有东西显示</span>
</pre></div>
</div>
<p>显示：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># pip 安装</span>
$ tensorboard --logdir<span class="o">=</span>/path/to/logs/

<span class="c1"># 源码安装</span>
$ python tensorflow/tensorboard/tensorboard.py --logdir<span class="o">=</span>/path/to/logs/
</pre></div>
</div>
<p>通过 sshdf 连接查看时，相对路径不起作用，要退到~, 然后使用绝对路径</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~
tensorboard --logdir<span class="o">=</span>&lt;abs_dir&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>每次保存前要将 logs 中的文件删除，否则出现混乱。</p>
</div>
</div></blockquote>
</div>
<div class="section" id="id7">
<h4><a class="toc-backref" href="#id1">4  对已训练好模型的操作</a><a class="headerlink" href="#id7" title="永久链接至标题">¶</a></h4>
<div class="section" id="changing-inputs-in-existing-networks-ref2">
<h5>4.1 Changing Inputs in existing networks <a class="reference external" href="https://github.com/tensorflow/tensorflow/issues/1758">ref2</a><a class="headerlink" href="#changing-inputs-in-existing-networks-ref2" title="永久链接至标题">¶</a></h5>
<p>The <code class="docutils literal notranslate"><span class="pre">tf.import_graph_def()</span></code> function provides the only (supported) way to perform this surgery, via the optional <code class="docutils literal notranslate"><span class="pre">input_map</span></code> argument. Let’s say you want to replace the tensor “DecodeJpeg:0” with your new variable. You would do something like the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">graph_def</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">tf_new_image</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">constant</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">import_graph_def</span><span class="p">(</span><span class="n">graph_def</span><span class="p">,</span> <span class="n">input_map</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;DecodeJpeg:0&quot;</span><span class="p">:</span> <span class="n">tf_new_image</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="section" id="ref3">
<h5>4.2 将已有网络作为现有网络的一部分重新训练网络 <a class="reference external" href="http://stackoverflow.com/questions/35180888/how-to-use-pre-trained-model-as-non-trainable-sub-network-in-tensorflow">ref3</a><a class="headerlink" href="#ref3" title="永久链接至标题">¶</a></h5>
<p>若要保留原有参数，optimize 时将欲保留的参数除外，如下：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">opt</span><span class="o">.</span><span class="n">minimize</span><span class="p">(</span><span class="n">loss</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">subset</span> <span class="n">of</span> <span class="n">variables</span> <span class="n">you</span> <span class="n">want</span> <span class="n">to</span> <span class="n">train</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>否则导入参数后正常训练即可</p>
<p>4.3 <a class="reference external" href="https://github.com/tensorflow/models/tree/master/inception#how-to-retrain-a-trained-model-on-the-flowers-data">retrain models</a></p>
</div>
</div>
<div class="section" id="set-layer-wise-learning-rate">
<h4><a class="toc-backref" href="#id1">5 set layer-wise learning rate</a><a class="headerlink" href="#set-layer-wise-learning-rate" title="永久链接至标题">¶</a></h4>
<blockquote>
<div><p><a class="reference external" href="http://stackoverflow.com/questions/34945554/how-to-set-layer-wise-learning-rate-in-tensorflow">How to set layer-wise learning rate in Tensorflow?</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">var_list1</span> <span class="o">=</span> <span class="p">[</span><span class="n">variables</span> <span class="kn">from</span> <span class="nn">first</span> <span class="mi">5</span> <span class="n">layers</span><span class="p">]</span>
<span class="n">var_list2</span> <span class="o">=</span> <span class="p">[</span><span class="n">the</span> <span class="n">rest</span> <span class="n">ofvariables</span><span class="p">]</span>
<span class="n">opt1</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">train</span><span class="o">.</span><span class="n">GradientDescentOptimizer</span><span class="p">(</span><span class="mf">0.00001</span><span class="p">)</span>
<span class="n">opt2</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">train</span><span class="o">.</span><span class="n">GradientDescentOptimizer</span><span class="p">(</span><span class="mf">0.0001</span><span class="p">)</span>
<span class="n">grads</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">gradients</span><span class="p">(</span><span class="n">loss</span><span class="p">,</span> <span class="n">var_list1</span> <span class="o">+</span> <span class="n">var_list2</span><span class="p">)</span>
<span class="n">grads1</span> <span class="o">=</span> <span class="n">grads</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="n">var_list1</span><span class="p">)]</span>
<span class="n">grads2</span> <span class="o">=</span> <span class="n">grads</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">var_list1</span><span class="p">):]</span>
<span class="n">tran_op1</span> <span class="o">=</span> <span class="n">opt1</span><span class="o">.</span><span class="n">apply_gradients</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">grads1</span><span class="p">,</span> <span class="n">var_list1</span><span class="p">))</span>
<span class="n">train_op2</span> <span class="o">=</span> <span class="n">opt2</span><span class="o">.</span><span class="n">apply_gradients</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">grads2</span><span class="p">,</span> <span class="n">var_list2</span><span class="p">))</span>
<span class="n">train_op</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="n">train_op1</span><span class="p">,</span> <span class="n">train_op2</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="id9">
<h3><a class="toc-backref" href="#id1">调试阶段</a><a class="headerlink" href="#id9" title="永久链接至标题">¶</a></h3>
<p><a class="reference external" href="https://wookayin.github.io/tensorflow-talk-debugging/#1">tools</a></p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>tfdbg 调试时，不能直接从 .sh 文件运行，否则会导致 <cite>cbreak() returned ERR</cite> 的错误。直接从命令行运行 python 脚本</p>
</div>
</div>
<div class="section" id="id10">
<h3><a class="toc-backref" href="#id1">测试阶段</a><a class="headerlink" href="#id10" title="永久链接至标题">¶</a></h3>
<div class="section" id="pb-re-classify-image">
<h4><a class="toc-backref" href="#id1">1  .pb文件的导入(<em>re:classify_image</em>)</a><a class="headerlink" href="#pb-re-classify-image" title="永久链接至标题">¶</a></h4>
<blockquote>
<div><dl>
<dt>有两种表达方式：</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tensorflow.python.platform</span> <span class="k">import</span> <span class="n">gfile</span>

<span class="c1"># 第1种方法 (当需要构建network时，此法不可用？)</span>
<span class="k">with</span> <span class="n">tf</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span> <span class="k">as</span> <span class="n">sess</span><span class="p">:</span>
  <span class="k">with</span> <span class="n">gfile</span><span class="o">.</span><span class="n">FastGFile</span><span class="p">(</span><span class="s1">&#39;/path/to/.pbfile&#39;</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
  <span class="c1"># 也可以是tf.gfile.FastGFile</span>
    <span class="n">graph_def</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">GraphDef</span><span class="p">()</span>
    <span class="n">graph_def</span><span class="o">.</span><span class="n">ParseFromString</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
    <span class="n">sess</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">as_default</span><span class="p">()</span>
    <span class="n">tf</span><span class="o">.</span><span class="n">import_graph_def</span><span class="p">(</span><span class="n">graph_def</span><span class="p">)</span>

<span class="c1"># 第2种方法 (node 名称前会加上 import)</span>
<span class="k">with</span> <span class="n">tf</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span><span class="o">.</span><span class="n">as_default</span><span class="p">()</span> <span class="k">as</span> <span class="n">imported_graph</span><span class="p">:</span>
  <span class="k">with</span> <span class="n">gfile</span><span class="o">.</span><span class="n">FastGFile</span><span class="p">(</span><span class="s1">&#39;/path/to/.pbfile&#39;</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">graph_def</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">GraphDef</span><span class="p">()</span>
    <span class="n">graph_def</span><span class="o">.</span><span class="n">ParseFromString</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
    <span class="n">tf</span><span class="o">.</span><span class="n">import_graph_def</span><span class="p">(</span><span class="n">graph_def</span><span class="p">)</span>
<span class="n">sess</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">Session</span><span class="p">(</span><span class="n">graph</span> <span class="o">=</span> <span class="n">imported_graph</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>使用时，为确定调用名称，使用以下语句查看：</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">session</span><span class="o">.</span><span class="n">graph_def</span><span class="o">.</span><span class="n">node</span><span class="p">:</span>
  <span class="nb">print</span> <span class="n">node</span><span class="o">.</span><span class="n">name</span>
<span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="n">tf</span><span class="o">.</span><span class="n">get_default_graph</span><span class="p">()</span><span class="o">.</span><span class="n">get_operations</span><span class="p">():</span>
  <span class="nb">print</span> <span class="n">op</span><span class="o">.</span><span class="n">name</span>
<span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="n">sess</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">get_operations</span><span class="p">():</span>  <span class="c1"># 此句同上</span>
  <span class="nb">print</span> <span class="n">op</span><span class="o">.</span><span class="n">name</span>

<span class="n">softmax_tensor</span> <span class="o">=</span>  <span class="n">sess</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">get_tensor_by_name</span><span class="p">(</span><span class="s2">&quot;XXX&quot;</span><span class="p">)</span>
<span class="n">prediction</span> <span class="o">=</span> <span class="n">sess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">softmax_tensor</span><span class="p">,{</span><span class="s2">&quot;name&quot;</span><span class="p">,</span><span class="nb">input</span><span class="p">})</span>
</pre></div>
</div>
</dd>
</dl>
</div></blockquote>
</div>
</div>
<div class="section" id="c">
<h3><a class="toc-backref" href="#id1">C++ 开发</a><a class="headerlink" href="#c" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p><a class="reference external" href="https://medium.com/jim-fleming/loading-a-tensorflow-graph-with-the-c-api-4caaff88463f">loading-a-tensorflow-graph-with-the-c-api</a></p>
</div></blockquote>
<div class="section" id="graph">
<h4><a class="toc-backref" href="#id1">1  创建graph并使用</a><a class="headerlink" href="#graph" title="永久链接至标题">¶</a></h4>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span> <span class="o">//</span> <span class="n">root</span> <span class="n">添加一系列ops</span>
<span class="n">tensoflow</span><span class="p">::</span><span class="n">GraphDef</span> <span class="n">graph_def</span><span class="p">;</span>
<span class="n">TF_RETURN_IF_ERROR</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">ToGraphDef</span><span class="p">(</span><span class="o">&amp;</span><span class="n">graph_def</span><span class="p">));</span>

<span class="n">std</span><span class="p">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">tensorflow</span><span class="p">::</span><span class="n">Session</span><span class="o">&gt;</span> <span class="n">session</span><span class="p">(</span>
    <span class="n">tensorflow</span><span class="p">::</span><span class="n">NewSession</span><span class="p">(</span><span class="n">tensorflow</span><span class="p">::</span><span class="n">SessionOptions</span><span class="p">()));</span>
<span class="n">TF_RETURN_IF_ERROR</span><span class="p">(</span><span class="n">session</span><span class="o">-&gt;</span><span class="n">Create</span><span class="p">(</span><span class="n">graph_def</span><span class="p">));</span>
<span class="n">TF_RETURN_IF_ERROR</span><span class="p">(</span><span class="n">session</span><span class="o">-&gt;</span><span class="n">Run</span><span class="p">({},</span> <span class="c1"># input</span>
                             <span class="p">{</span><span class="n">output_name</span><span class="p">}</span> <span class="c1"># which node we want get the output from</span>
                             <span class="p">,</span> <span class="p">{},</span> <span class="n">out_tensors</span> <span class="c1"># where to put the output data</span>
                             <span class="p">));</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="pb-re-label-image">
<h4><a class="toc-backref" href="#id1">2  .pb文件的使用(<em>re:label_image</em>)</a><a class="headerlink" href="#pb-re-label-image" title="永久链接至标题">¶</a></h4>
<blockquote>
<div><blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">方法1</span><span class="p">:</span>
<span class="n">Status</span> <span class="n">LoadGraph</span><span class="p">(</span><span class="n">string</span> <span class="n">graph_file_name</span><span class="p">,</span> <span class="n">Session</span><span class="o">**</span> <span class="n">session</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">tensoflow</span><span class="p">::</span><span class="n">GraphDef</span> <span class="n">graph_def</span><span class="p">;</span>
  <span class="n">TF_RETURN_IF_ERROR</span><span class="p">(</span>
        <span class="n">ReadBinaryProto</span><span class="p">(</span><span class="n">tensoflow</span><span class="p">::</span><span class="n">Env</span><span class="p">::</span><span class="n">Default</span><span class="p">(),</span> <span class="n">graph_file_name</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">graph_def</span><span class="p">)</span>
  <span class="p">);</span>
  <span class="n">TF_RETURN_IF_ERROR</span><span class="p">(</span><span class="n">NewSession</span><span class="p">(</span><span class="n">SessionOptions</span><span class="p">(),</span> <span class="n">session</span><span class="p">));</span>
  <span class="n">TF_RETURN_IF_ERROR</span><span class="p">((</span><span class="o">*</span><span class="n">session</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">Create</span><span class="p">(</span><span class="n">graph_def</span><span class="p">));</span>
  <span class="k">return</span> <span class="n">Status</span><span class="p">::</span><span class="n">OK</span><span class="p">();</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">方法2</span><span class="p">:</span>
<span class="n">Status</span> <span class="n">LoadGraph</span><span class="p">(</span><span class="n">string</span> <span class="n">graph_file_name</span><span class="p">,</span> <span class="n">std</span><span class="p">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">tensoflow</span><span class="p">::</span><span class="n">Session</span><span class="o">&gt;*</span> <span class="n">session</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">tensoflow</span><span class="p">::</span><span class="n">GraphDef</span> <span class="n">graph_def</span><span class="p">;</span>
  <span class="n">TF_RETURN_IF_ERROR</span><span class="p">(</span>
        <span class="n">ReadBinaryProto</span><span class="p">(</span><span class="n">tensoflow</span><span class="p">::</span><span class="n">Env</span><span class="p">::</span><span class="n">Default</span><span class="p">(),</span> <span class="n">graph_file_name</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">graph_def</span><span class="p">)</span>
  <span class="p">);</span>
  <span class="n">session</span><span class="o">-&gt;</span><span class="n">reset</span><span class="p">(</span><span class="n">tensoflow</span><span class="p">::</span><span class="n">NewSession</span><span class="p">(</span><span class="n">tensoflow</span><span class="p">::</span><span class="n">SessionOptions</span><span class="p">()));</span>
  <span class="n">TF_RETURN_IF_ERROR</span><span class="p">((</span><span class="o">*</span><span class="n">session</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">Create</span><span class="p">(</span><span class="n">graph_def</span><span class="p">));</span>
  <span class="k">return</span> <span class="n">Status</span><span class="p">::</span><span class="n">OK</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<dl class="simple">
<dt>编译注意事项：</dt><dd><ol class="arabic simple">
<li><p>BUILD 文件中的内容（比如文件name 与 .cc 文件一致）</p></li>
<li><p>整个项目文件夹要放在” tensorflow/tensorflow”以下的文件夹中</p></li>
<li><p>LISCENCE 文件？？</p></li>
<li><p>不要和其它无关文件放在一起</p></li>
<li><p>单幅图时注意expand dims</p></li>
</ol>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="id11">
<h4><a class="toc-backref" href="#id1">3  生成 tensorflow 的动态链接库</a><a class="headerlink" href="#id11" title="永久链接至标题">¶</a></h4>
<blockquote>
<div><ol class="arabic">
<li><p>Create a new folder in the TensorFlow repo at tensorflow/tensorflow/libtensorflow/.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tensorflow</span><span class="o">/</span><span class="n">tensorflow</span><span class="o">/</span><span class="n">libtensorflow</span><span class="o">/</span>
<span class="n">tensorflow</span><span class="o">/</span><span class="n">tensorflow</span><span class="o">/</span><span class="n">libtensorflow</span><span class="o">/</span><span class="n">BUILD</span>
</pre></div>
</div>
</li>
<li><p>Inside this folder we’re going to create a new BUILD file which will contain a single call to cc_binary with the linkshared option set to 1 so that we get a .so from the build. The name of the binary must end in .so or it will not work.</p>
<div class="highlight-makefile notranslate"><div class="highlight"><pre><span></span>cc_binary(
    name = &quot;libtensorflow.so&quot;,
    linkshared = 1,
    deps = [
        &quot;//tensorflow/core:tensorflow&quot;,
    ]
)
</pre></div>
</div>
</li>
<li><p>From the root of the repository, run <code class="docutils literal notranslate"><span class="pre">./configure</span></code> .</p></li>
<li><p>Compile the shared library with <code class="docutils literal notranslate"><span class="pre">bazel</span> <span class="pre">build</span> <span class="pre">--config=opt</span> <span class="pre">//tensorflow/libtensorflow:libtensorflow.so</span></code> and locate the generated file from the repo’s root: <code class="docutils literal notranslate"><span class="pre">bazel-bin/tensorflow/libtensorflow/libtensorflow.so</span></code></p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>If you’re on OS X and using Node.js you’ll need to rename the shared library from libtensorflow.so to libtensorflow.dylib</p>
<p>if compile with GPU, cmd is <code class="docutils literal notranslate"><span class="pre">bazel</span> <span class="pre">build</span> <span class="pre">--config=opt</span> <span class="pre">--config=cuda</span> <span class="pre">//tensorflow/libtensorflow:libtensorflow.so</span></code></p>
</div>
</div></blockquote>
</div>
<div class="section" id="id12">
<h4><a class="toc-backref" href="#id1">4 c++ 代码调试</a><a class="headerlink" href="#id12" title="永久链接至标题">¶</a></h4>
<blockquote>
<div><p>在编译时加入调试信息 <code class="docutils literal notranslate"><span class="pre">bazel</span> <span class="pre">build</span> <span class="pre">-c</span> <span class="pre">dbg</span> <span class="pre">//&lt;path</span> <span class="pre">to</span> <span class="pre">src&gt;:&lt;target_name&gt;</span></code> , 然后使用 gdb 调试</p>
<p>更多调试， 参考 <a class="reference external" href="https://gist.github.com/Mistobaan/738e76c3a5bb1f9bcc52e2809a23a7a1">TENSORFLOW_DEBUG.md</a></p>
<p><a class="reference external" href="https://pure-earth-7284.herokuapp.com/2016/10/18/debug-tensorflow-using-lldb/">在macOS上用LLDB调试TensorFlow源码</a></p>
</div></blockquote>
</div>
</div>
<div class="section" id="id13">
<h3><a class="toc-backref" href="#id1">Android实现</a><a class="headerlink" href="#id13" title="永久链接至标题">¶</a></h3>
<div class="section" id="id14">
<h4><a class="toc-backref" href="#id1">android环境搭建</a><a class="headerlink" href="#id14" title="永久链接至标题">¶</a></h4>
<ul>
<li><p>若tensorflow尚未下载，最好用以下方法下载:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/tensorflow/tensorflow.git --recurse-submodules
</pre></div>
</div>
</li>
<li><p>后续参考“/tensorflow/example/android”中的 <strong>Readme.md</strong> 文件（国内sdk 和 ndk 的下载地址: <a class="reference external" href="http://www.androiddevtools.cn">androiddevtools</a> ）</p></li>
<li><p>编译生成的.so文件（位于.cache文件夹下）可用于androd studio中开发使用。</p>
<div class="admonition tip">
<p class="admonition-title">小技巧</p>
<p>可以通过查看BUILD文件查询.so文件的名称，后通过locate命令查询其在ubuntu中的位置。</p>
</div>
</li>
<li><p>tensorflow的mobile实现： <cite>mobile &lt;https://www.tensorflow.org/mobile.html&gt;</cite> _</p></li>
<li><p>有些错误可能是因为环境变量的设置问题，例如报错 /usr/local/bin/gcc ,将/usr/local/bin 从PATH中删除即可，猜测可能是gcc冲突之类的原因。注意修改环境变量后确认其是否真正生效！！</p></li>
<li><p>在反复修改编译的过程中建议使用 <code class="docutils literal notranslate"><span class="pre">bazel</span> <span class="pre">clean</span></code> 来清除前次的编译结果，避免未知错误</p></li>
<li><p>bazel 版本造成问题，加 –invcompatible_load_argument_is_label=false</p></li>
<li><p>找不到cuda等的.so文件，build 加 –action_env=”LD_LIBRARY_PATH=${LD_LIBRARY_PATH}”</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>若之前用于编译生成gpu 版的.whl 文件，那么此时注意重新configure，因为android 代码的编译不需要 gpu。
the android demo should not need CUDA. Is it possible during configuration you configured TF to build with CUDA? That would add –config=cuda automatically to the build.</p>
</div>
</div>
<div class="section" id="id15">
<h4><a class="toc-backref" href="#id1">开发</a><a class="headerlink" href="#id15" title="永久链接至标题">¶</a></h4>
<p>bazel build 后生成 .so 文件(在bazel-out|.cache文件夹下)，可将其用于AS中开发。</p>
<blockquote>
<div><div class="admonition tip">
<p class="admonition-title">小技巧</p>
<p>可以通过查看BUILD文件查询.so文件的名称，后通过locate命令查询其在ubuntu中的位置。</p>
</div>
</div></blockquote>
<p>参考 <a class="reference external" href="https://blog.mindorks.com/android-tensorflow-machine-learning-example-ff0e9b2654cc">Android TensorFlow Machine Learning Example</a></p>
<ol class="arabic">
<li><p>根据 <code class="docutils literal notranslate"><span class="pre">tensoflow/contrib/android</span></code> 下的 <code class="docutils literal notranslate"><span class="pre">README</span></code> build the <strong>.jar</strong> and <strong>.so</strong> file.</p></li>
<li><p>create an android sample project in Android Studio.</p></li>
<li><p>Put <strong>label file</strong> (imagenet_comp_graph_label_strings.txt) and <strong>pre-trained model</strong> (tensorflow_inception_graph.pb) into <code class="docutils literal notranslate"><span class="pre">assets</span></code> folder.</p></li>
<li><p>Put <strong>.jar</strong> file in <code class="docutils literal notranslate"><span class="pre">libs</span></code> folder and right click and add as library.</p></li>
<li><p>Create <code class="docutils literal notranslate"><span class="pre">jniLibs</span></code> folder in <code class="docutils literal notranslate"><span class="pre">main</span></code> directory and put <strong>.so</strong> in <code class="docutils literal notranslate"><span class="pre">jniLibs/armeabi-v7a</span></code> folder.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>├── app
│   ├── build.gradle
│   ├── libs
│   │   └── libandroid_tensorflow_inference_java.jar
│   └── src
│       ├── androidTest
│       ├── main
│       │   ├── AndroidManifest.xml
│       │   ├── assets
│       │   │   ├── imagenet_comp_graph_label_strings.txt
│       │   │   └── tensorflow_inception_graph.pb
│       │   ├── java
│       │   │   └── &lt;main java code&gt;
│       │   ├── jniLibs
│       │   │   └── armeabi-v7a
│       │   │       └── libtensorflow_inference.so
│       │   └── res
│       └── test
├── assets
│   └──&lt;test image&gt;
├── build.gradle
├── gradle
├── gradle.properties
├── gradlew
├── gradlew.bat
└── settings.gradle
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="id16">
<h4><a class="toc-backref" href="#id1">注意事项</a><a class="headerlink" href="#id16" title="永久链接至标题">¶</a></h4>
<blockquote>
<div><ol class="arabic simple">
<li><p>.h 和 .cc 文件同步修改</p></li>
<li><p>同步更换 .pb 和 .txt 文件</p></li>
</ol>
</div></blockquote>
</div>
<div class="section" id="id17">
<h4><a class="toc-backref" href="#id1">错误集锦</a><a class="headerlink" href="#id17" title="永久链接至标题">¶</a></h4>
<blockquote>
<div><dl>
<dt>No OpKernel was registered to Support:</dt><dd><div class="line-block">
<div class="line">出错的原因是模型中包含的某些运算没有加到 BUILD 文件中，解决办法有两条：</div>
<div class="line">1 将包含相应运算的文件包含到 BUILD 文件中</div>
<div class="line">2 可能的话，保存不包含该运算的模型</div>
</div>
</dd>
</dl>
</div></blockquote>
</div>
</div>
</div>
<div class="section" id="caffetensorflow">
<h2><a class="toc-backref" href="#id1">Caffe到tensorflow的转换</a><a class="headerlink" href="#caffetensorflow" title="永久链接至标题">¶</a></h2>
<p>转换程序代码： <a class="reference external" href="https://github.com/ethereon/caffe-tensorflow">caffe-tensorflow</a></p>
</div>
<div class="section" id="nodejs">
<h2><a class="toc-backref" href="#id1">Nodejs</a><a class="headerlink" href="#nodejs" title="永久链接至标题">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="https://medium.com/jim-fleming/loading-tensorflow-graphs-via-host-languages-be10fd81876f">lodading tensorflow model from Node.js</a></p>
</div></blockquote>
</div>
<div class="section" id="id18">
<h2><a class="toc-backref" href="#id1">源代码精读</a><a class="headerlink" href="#id18" title="永久链接至标题">¶</a></h2>
<div class="section" id="id19">
<h3><a class="toc-backref" href="#id1">基础应用注意</a><a class="headerlink" href="#id19" title="永久链接至标题">¶</a></h3>
<p>tensor A * B – 元素运算
tf.multiply(A, B) – 元素运算
tf.matmul(A, B) – 矩阵运算</p>
</div>
<div class="section" id="id20">
<h3><a class="toc-backref" href="#id1">笔记</a><a class="headerlink" href="#id20" title="永久链接至标题">¶</a></h3>
<p>tf.shape() 返回动态纬度， tensor.shape 返回静态纬度</p>
</div>
<div class="section" id="seq2seq">
<h3><a class="toc-backref" href="#id1">Seq2Seq</a><a class="headerlink" href="#seq2seq" title="永久链接至标题">¶</a></h3>
<p><code class="file docutils literal notranslate"><span class="pre">tensorflow/contrib/legacy_seq2seq/python/ops/seq2seq.py</span></code> (version 1.11)</p>
<p>tensorflow版本升级之后(r1.3及之后？)把之前的 <code class="xref py py-mod docutils literal notranslate"><span class="pre">tf.nn.seq2seq</span></code> 的代码迁移到了 <code class="xref py py-mod docutils literal notranslate"><span class="pre">tf.contrib.legacy_seq2seq</span></code> 下面，这部分API估计以后会被遗弃，因为已经开发出了新的API放在 <code class="xref py py-mod docutils literal notranslate"><span class="pre">tf.contrib.seq2seq</span></code> 下面，更加灵活。</p>
<p>文件函数结构如下, 共实现了6个seq2seq函数</p>
<ul>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">model_with_buckets()</span></code></p>
<ul>
<li><p>seq2seq函数</p>
<ol class="arabic simple">
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">basic_rnn_seq2seq()</span></code> ：最简单版本，输入和输出都是embedding的形式；最后一步的state vector作为decoder的initial state；encoder和decoder用相同的RNN cell， 但不共享权值参数；</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">rnn_decoder()</span></code></p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">tied_rnn_seq2seq()</span></code> ：同1，但是encoder和decoder共享权值参数</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">embedding_rnn_seq2seq()</span></code> ：同1，但输入和输出改为id的形式，函数会在内部创建分别用于encoder和decoder的embedding matrix</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">embedding_rnn_decoder()</span></code></p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">embedding_tied_rnn_seq2seq()</span></code> ：同2，但输入和输出改为id形式，函数会在内部创建分别用于encoder和decoder的embedding matrix</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">embedding_attention_seq2seq()</span></code> ：同3，但多了attention机制</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">embedding_attention_decoder()</span></code></p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">attention_decoder()</span></code></p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">attention()</span></code></p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">one2many_rnn_seq2seq()</span></code></p></li>
</ol>
</li>
<li><p>loss函数</p>
<ul class="simple">
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">sequence_loss_by_example()</span></code></p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">sequence_loss()</span></code></p></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">model_with_buckets()</span></code> 的目的是为了减少计算量和加快模型计算速度，因为这部分代码比较古老——有些地方还在使用static_rnn()这种函数，其实新版的tf中引入dynamic_rnn之后就不需要这么做了。该方法为每个bucket都构造一个模型(这些模型参数共享)，然后训练时取相应长度的序列进行。其实这一部分可以参考现在的dynamic_rnn来进行理解，dynamic_rnn是对每个batch的数据将其pad至本batch中长度最大的样本，而bucket则是在数据预处理环节先对数据长度进行聚类操作。</p>
<p><code class="file docutils literal notranslate"><span class="pre">tensorflow/contrib/eager/python/examples/generative_examples</span></code>
<code class="file docutils literal notranslate"><span class="pre">tensorflow/contrib/eager/python/examples/nmt_with_attention</span></code>
<code class="file docutils literal notranslate"><span class="pre">models/research/textsum</span></code>
<code class="file docutils literal notranslate"><span class="pre">nmt</span></code></p>
</div>
</div>
<div class="section" id="skflow-scikit-flow">
<h2><a class="toc-backref" href="#id1">skflow(Scikit Flow)</a><a class="headerlink" href="#skflow-scikit-flow" title="永久链接至标题">¶</a></h2>
<blockquote>
<div><p>位于 <code class="file docutils literal notranslate"><span class="pre">/tensorflow/contrib/learn/python/learn</span></code> 下面, 模仿Scikit Learn （ML &amp; 数据挖掘工具包）。</p>
</div></blockquote>
</div>
<div class="section" id="id21">
<h2><a class="toc-backref" href="#id1">代码结构</a><a class="headerlink" href="#id21" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li><p>代码分成op、module和model三个部分</p></li>
<li><p>定义op 等时使用修饰器加 scope</p></li>
<li><p>使用config 文件定义参数</p></li>
<li><p>image summary 的输入用placeholder 而非数据，避免在save 的时候不断累加</p></li>
<li><p>将网络输入定义在train 的部分而非 init 中，便于reuse</p></li>
<li><p>保存log信息(logging)</p></li>
</ul>
</div>
<div class="section" id="id22">
<h2><a class="toc-backref" href="#id1">训练记录</a><a class="headerlink" href="#id22" title="永久链接至标题">¶</a></h2>
<div class="section" id="id23">
<h3><a class="toc-backref" href="#id1">1 数据准备</a><a class="headerlink" href="#id23" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>detection:  .pkl 文件 80,000 (32*32*3), 分批打包
keypoints:  直接读取（218*178*3）</p>
</div></blockquote>
</div>
<div class="section" id="id24">
<h3><a class="toc-backref" href="#id1">2 参数分析</a><a class="headerlink" href="#id24" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>1 face_detection</p>
<blockquote>
<div><table class="docutils align-center">
<colgroup>
<col style="width: 50%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>参数</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</div>
</div>
<div class="section" id="id25">
<h2><a class="toc-backref" href="#id1">后续工作</a><a class="headerlink" href="#id25" title="永久链接至标题">¶</a></h2>
<blockquote>
<div><div class="line-block">
<div class="line">训练(lr,opti)，tensorboard image、graph</div>
<div class="line">代码整理（开始前自动检测log 文件夹并删除、separate model、name）</div>
<div class="line">retrain the model(c++)</div>
<div class="line">detection 剩余数据</div>
</div>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="caffe.html" class="btn btn-neutral float-right" title="caffe 学习笔记" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="常用第三方包" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Emily

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>